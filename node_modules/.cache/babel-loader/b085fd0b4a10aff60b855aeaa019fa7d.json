{"ast":null,"code":"import { database } from '../database/config';\nexport function startAddingPost(post) {\n  return dispatch => {\n    return database.ref('posts').update({\n      [post.id]: post\n    }).then(() => {\n      dispatch(addPost(post));\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n}\nexport function startLoadingPost() {\n  return dispatch => {\n    return database.ref('posts').once('value').then(snapshot => {\n      console.log(snapshot);\n      let posts = [];\n      snapshot.forEach(childSnapshot => {\n        posts.push(childSnapshot.val());\n      });\n      dispatch(loadPosts(posts));\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n}\nexport function startRemovingPosts(index, id) {\n  return dispatch => {\n    return database.ref(\"posts/\".concat(id)).remove().then(() => {\n      dispatch(removedPost(index));\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n}\nexport function removedPost(index) {\n  return {\n    type: 'REMOVED_POST',\n    index: index\n  };\n}\nexport function addPost(post) {\n  return {\n    type: 'ADD_POST',\n    post: post\n  };\n}\nexport function loadPosts(posts) {\n  return {\n    type: 'LOAD_POSTS',\n    posts\n  };\n}\nexport function startAddingComment(comment, postId) {\n  return dispatch => {\n    return database.ref(\"comments/\".concat(postId)).push(comment).then(() => {\n      dispatch(addComment(comment, postId));\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n}\nexport function startLoadingComments() {\n  return dispatch => {\n    return database.ref('comments').once('value').then(snapshot => {\n      let comments = {};\n      snapshot.forEach(childSnapshot => {\n        comments[childSnapshot.key] = Object.values([childSnapshot.val()]);\n      });\n      dispatch(loadComments(comments));\n    });\n  };\n}\nexport function loadComments(comments) {\n  return {\n    type: 'LOAD_COMMENTS',\n    comment\n  };\n}\nexport function addComment(comment, postId) {\n  return {\n    type: 'ADD_COMMENT',\n    comment,\n    postId\n  };\n}","map":{"version":3,"sources":["/home/mojtaba/Desktop/PhotoWall/Photo_Wall_reactjs/src/redux/action.js"],"names":["database","startAddingPost","post","dispatch","ref","update","id","then","addPost","catch","error","console","log","startLoadingPost","once","snapshot","posts","forEach","childSnapshot","push","val","loadPosts","startRemovingPosts","index","remove","removedPost","type","startAddingComment","comment","postId","addComment","startLoadingComments","comments","key","Object","values","loadComments"],"mappings":"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","sourcesContent":["import { database } from '../database/config'\n\nexport function startAddingPost(post) {\n    return (dispatch) => {\n        return database.ref('posts').update({ [post.id]: post }).then(() => {\n            dispatch(addPost(post));\n        }).catch((error) => {\n            console.log(error);\n        })\n    }\n}\n\nexport function startLoadingPost() {\n    return (dispatch) => {\n        return database.ref('posts').once('value').then((snapshot) => {\n            console.log(snapshot);\n            let posts = [];\n            snapshot.forEach((childSnapshot) => {\n                posts.push(childSnapshot.val());\n            });\n            dispatch(loadPosts(posts));\n        }).catch((error) => {\n            console.log(error);\n        })\n    }\n}\n\nexport function startRemovingPosts(index, id) {\n    return (dispatch) => {\n        return database.ref(`posts/${id}`).remove().then(() => {\n            dispatch(removedPost(index));\n        }).catch((error) => {\n            console.log(error);\n        })\n    }\n\n}\n\nexport function removedPost(index) {\n    return {\n        type: 'REMOVED_POST',\n        index: index\n    }\n}\n\nexport function addPost(post) {\n    return {\n        type: 'ADD_POST',\n        post: post\n    }\n}\nexport function loadPosts(posts) {\n    return {\n        type: 'LOAD_POSTS',\n        posts\n    }\n}\nexport function startAddingComment(comment, postId) {\n    return (dispatch) => {\n        return database.ref(`comments/${postId}`).push(comment).then(() => {\n            dispatch(addComment(comment, postId))\n        }).catch((error) => {\n            console.log(error);\n        })\n    }\n\n}\n\nexport function startLoadingComments() {\n    return (dispatch) => {\n        return database.ref('comments').once('value').then((snapshot) => {\n            let comments = {};\n            snapshot.forEach((childSnapshot) => {\n                comments[childSnapshot.key] = Object.values([childSnapshot.val()])\n            })\n            dispatch(loadComments(comments))\n        })\n    }\n}\nexport function loadComments(comments){\n    return{\n        type:'LOAD_COMMENTS',\n        comment\n    }\n}\n\n\nexport function addComment(comment, postId) {\n    return {\n        type: 'ADD_COMMENT',\n        comment,\n        postId\n    }\n}"]},"metadata":{},"sourceType":"module"}